This file is for descriptions of obscure behavior and functionality code locations.
Also general things that could be improved.


Civ friendship code doesn't make sense. It should only evaluate at the end of a turn, and display predicted in the tooltip. Also needs better UI to explain WTF is going on. There should be no INSTANT friendship changes.
Any LUA functionality is screwed and should be deleted.

Assets\DLC\LEKMOD_V28.2\UI\prophetreplace.lua
All lua files in Assets\DLC\LEKMOD_V28.2\Mods\



replace floats:
[0-9]f
[e,E][+,-][0-9]


icon atlas and images (contains readme with more info)
\Mods\[BNW] Colonialist Legacies - Malaysia (v 3)\Art\IconAtlas



barbarians only get 1 move per turn
CvUnit::getMoves()


plunder trade route
CvPlayerTrade::PlunderTradeRoute


minor civ city state friendship calculation
CvMinorCivAI::GetFriendshipChangePerTurnTimes100
friendship increase. Display should explain mechanics (+/-200 limit, per turn expected changes, etc.)
CvMinorCivAI::DoFriendshipChangeEffects


any adjacent military naval unit will blockade the whole city,
or if there are 2 within 2 range, embarked do not count
CvCity::IsBlockaded

water routes
unrevealed terrain is not allowed
int WaterRouteValid


20% compounding less benefits from trade routes originating from the same city
does not allow fractional benefits
CvPlayerTrade::CalcTradeConnectionValueTimes100


combat strength modifiers 
CvUnit::GetGenericMaxStrengthModifier
CvUnit::GetMaxRangedCombatStrength


great works dig
CvPlayerCulture::DoArchaeologyChoice


How fast do units heal
CvUnit::healRate


found settle city
CvCitySiteEvaluator::CanFound
MIN_CITY_RANGE



city found tiles distance (minimum tiles between)
MIN_CITY_RANGE

spy vision reveal radius
ESPIONAGE_SURVEILLANCE_SIGHT_RANGE


Number of barbarians depends on size of map.
Appart from initial spawn, 1/10th of missing units will respawn per turn.
Barbarian Spawning uses halton sequence. Only 40% probability that a unit is able to spawn in borders.
Barb will still spawn somewhere else. 
CvBarbarians::DoSpawnBarbarianUnit


trade route and cargo ship comparitive modifiers, currently equal
CvGameTrade::GetDomainModifierTimes100

AI will no longer consider build priorities with number of turns left.
CityStrategyAIHelpers::ReweightByTurnsLeft was trashed so AI will no longer respect this.

Unit maintenance increases exponentially.
CvTreasury::CalculateUnitCost


NUKE_CITY_HIT_POINT_DAMAGE is the percentage of remaining health of a city a nuke will remove, ignoring modifiers
LEVEL1_POPULATION_DEATH_BASE is the start population percentage a nuke may consider removing. It can only decrease.
NukeModifier on a building needs to be negative to reduce population loss.


Tying score for world project contributions can both win rewards.
CvVotingClasses::GetMemberContributionTier


DefensePerCitizen Boosts city defense per population.

Player must secure MORE than DIPLO_VICTORY_DEFAULT_VOTE_PERCENT of CURRENTLY possible votes.
Dead/Bought civs do not count for votes.
CvGame::DoUpdateDiploVictory

